# Работа с Git

## <u>1. Проверка наличия установленного Git</u>

В терминале выполнить команду `git version`
Если Git установлен, появится сообщение с информацией о версии программы. Иначе будет сообщение об ошибке. Если выяснилось, что используется устаревшая версия, то для обновления (для Windows) вводим в терминале команду `git update-git-for-windows`

## <u>2. Установка Git</u>

Загружаем последнюю версию Git с официального сайта по адресу:

https://git-scm.com/downloads

Устанавливаем с настройками по умолчанию.

## <u>3. Настройка Git</u>

При первом использовании Git необходимо представиться. Для этого в терминале надо внести две команды:

```
git config --global user.name "Your name"
git config --global user.email "post@example.com"
```

## <u>4. Создание репозитория</u>

Создать репозиторий можно двумя способами:

1. **`Инициализация`**. В терминале переходим к папке, в которой хотим создать репозиторий. Выполняем команду

<i style="color:green; font-family:courier; font-size:20px">git init</i>

При этом будет создана папка `.git`, которая является скрытой и будет видна только при соответствующей настройке операционной системы.
В этой папке хранится вся информация о проекте и его изменениях.

2. **`Клонирование`**. Репозиторий создаётся путём создания копии другого репозитория. Способ будет рассмотрен в следующих лекциях.

## <u>5. Запись изменений в репозиторий</u>

Запись изменений репозитория может варьироваться в зависимости от конкретной ситуации состоит из нескольких этапов:

### 1) Проверка статуса репозитория

Для проверки статуса (состояния) репозитория вводим команду

<i style="color:green; font-family:courier; font-size:20px">git status</i>

При этом в терминал выводится:

- отслеживается ли репозиторий (если, например, репозиторий не инициирован)
- информация о том, в какой ветке выполняются действия
- информация об отслеживаемых файлах и их статусе, такие как:

1. все текущие файлы отправлены в хранилище
2. перечень модифицированных файлов, которые необходимо поставить в очередь на сохранение. Они выделяются красным цветом.
3. перечень модифицированных файлов, уже поставленных в очередь на сохранение. Они выделяются зелёным цветом.
4. подсказки о выполнении действий, которые в данной ситуации необходимы
   > Возможна упрощённая команда `git status -s` , которая отображает статус измененных файлов буквой М (красной, если изменённые файлы не поставлены в очередь на сохранение, зелёной, если они готовы к сохранению и двумя буквами М (ММ) - одной красной и одной зелёной, если файл добавлен в очередь на сохранение командой `git add`, но не сохранён, и в этой ситуации файл дополнительно был изменен, но не добавлен в очередь на сохранение. В этой ситуации следует этот изменённый файл поставить в очередь на сохранение командой `git add <имя файла>`)

_О постановке в очередь на сохранение смотри в следующем пункте_

### 2) Добавление файлов в очередь на сохранение

Для того, чтобы поставить изменённые файлы в очередь на сохранение, необходимо в терминале ввести следующую команду:

<i style="color:green; font-family:courier; font-size:20px">git add <Имя файла> <Имя файла></i>
Все файлы, которые необходимо поставить в очередь, перечисляются через пробел и должны быть указаны со своими расширениями

> Для внесения в список `всех` изменённых файлов удобно использовать универсальную команду: <i style="color:green; font-family:courier; font-size:20px">git add .</i> Точка обозначает _"все файлы"_.

После выполнения команды `git add`, если проверить статус командой `git status`, имена выбранных файлов будут выделены <span style="color:green">зелёным</span> цветом. Если не все файлы были включены в список на сохранение, то цвет невыбранных файлов останется <span style="color:red">красным</span>

Удалить файл из очереди на сохранение можно командой

<i style="color:green; font-family:courier; font-size:20px">git rm --cached Имя файла</i>

### 3) Просмотр изменений в файлах, поставленных в очередь

До внесения файлов в очередь на запись в коммит можно просмотреть, какие внесены изменения в эти файлы командой

<i style="color:green; font-family:courier; font-size:20px">git diff</i>

Добавленное содержимое будет начинаться со знака `+` и выделено <span style="color:green">зелёным</span> цветом.
Удаленное из файла содержимое будет начинаться со знака `-` и выделено <span style="color:red">красным</span> цветом.

### 4) Сохранение файлов из очереди в коммит

Для сохранения (фиксации) файлов из очереди в хранилище необходимо ввести команду:

<i style="color:green; font-family:courier; font-size:20px">git commit -m "<Комментарий>"</i>

> Если сохраняем уже имеющиеся файлы (то есть, старые версии этих файлов уже имеются в хранилище), то можно воспользоваться командой  
> <i style="color:green; font-family:courier; font-size:20px">git commit `-am` "<Комментарий>"</i>

> Что автоматически ставит эти файлы в очередь (без использования команды `git add`) и отправляет их в хранилище.
> Следует учесть, что таким образом мы не сможем сохранить файлы выборочно, а сохраняет сразу все изменённые файлы.

## <u>6. Просмотр истории коммитов</u>

Для просмотра истории коммитов данного репозитория следует ввести команду

<i style="color:green; font-family:courier; font-size:20px">git log</i>

Команда выводит информацию о всех сохранениях, включая их `ID` и комментарии, что позволяет ориентироваться в истории сохранений и переходить к любому из них, используя их `ID`. Подробнее о переходе между коммитами можно посмотреть в следующем Разделе 7.

> Если список сохранений (коммитов) достаточно большой, то можно воспользоваться этой командой с ключом "одной строкой":

> <i style="color:green; font-family:courier; font-size:20px">git log --oneline</i>

Кроме того, можно вывести не все, а несколько последних коммитов, указав их количество в качестве ключа:

<i style="color:green; font-family:courier; font-size:20px">git log -2</i>

## <u>7. Перемещение между сохранениями</u>

При необходимости перейти к какому-нибудь из прошлых сохранений (например, чтобы создать от него ответвление, или, как обычно называют, ветку), используем команду

<i style="color:green; font-family:courier; font-size:20px">git checkout ID</i>

где используем ID сохранения, полученный в предыдущем Разделе 6.

> Команда не будет работать, пока не будут выполнены сохранения всех изменённых файлов.

Чтобы вернуться на вершину основной ветки (обычно это master) и продолжить работу с проектом, вводим команду

<i style="color:green; font-family:courier; font-size:20px">git checkout master</i>

## <u>8. Несколько советов по работе с Git</u>

> _Для очистки окна терминала следует ввести команду_ `clear`

> _Для возврата управления терминалом после вывода в него информации при выполнении какой-нибудь команды, следует нажать клавишу `Q`. При этом, клавиатура должна быть переключена на английскую раскладку._

> _Для того, чтобы скрыть/показать терминал, используем горячие клавиши `Ctrl+J`_

> _Для изменения коммертария уже сохранённого коммита можно использовать команду `git rebase -i HEAD~4` Для примера выбрано к исправлению 4 последних комментария. В открывшемся редакторе для коммитов, в которых требуется изменить комментарий, в начале строки об этом коммите меняем `pick` на `r`, сохраняем и закрываем редактор, который автоматически открывается вновь, но уже с возможностью откорректировать нужный комментарий. Корректируем, сохраняем, закрываем редактор. Задача выполнена._ > _Команда работает только если нет несохранённых изменений_

> _Для установки редактора по умолчанию вводим в терминале строку `git config --global core.editor Редактор`. Редактор может быть, например, notepad, и команда будет выглядеть таким образом:
> `git config --global core.editor notepad`_

### _Выделение блока кода в соответствие синтаксису указанного языка. В примере использован язык Javascript_

```JS
while(a < 0) {
console.log(a)
}
```

## <u>9. Клонирование репозитория</u>

Одним из способов создания репозитория является его клонирование из другого репозитория, в том числе из находящегося в удалённом ресурсе. Используется команда

<i style="color:green; font-family:courier; font-size:20px">git clone ссылка</i>

Следует иметь ввиду, что клонируются не только сами файлы, но и все их версии с историей изменений. Так же, клон имеет имя оригинального репозитория. Чтобы клонировать репозиторий и присвоить ему другое имя, следует ввести команду

<i style="color:green; font-family:courier; font-size:20px">git clone ссылка новое_имя</i>

где новое_имя - это может быть целый путь к создаваемой при этом папке, а имя этой папки будет новым именем репозитория.

## <u>10. Удаление репозитория</u>

Для того, чтобы удалить репозиторий, следует удалить папку .git в папке, содержащей проект.

## <u>11. Просмотр веток репозитория</u>

## <u>12. Создание новой ветки</u>

## <u>13. Переход в другую ветку</u>

## <u>14. Слияние веток репозитория</u>

## <u>15. Конфликты при слиянии и их устранение</u>

## <u>16. Удаление слитой ненужной ветки</u>

## <u>16. Удаление не слитой ненужной ветки</u>
